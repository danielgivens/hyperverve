function init(){container=document.createElement("div"),document.body.appendChild(container),camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,5e3),camera.position.z=3e3;var a="assets/images/cube/hv/",b=".png",c=[a+"posy"+b,a+"negy"+b,a+"posx"+b,a+"negx"+b,a+"negz"+b,a+"posz"+b],d=(new THREE.CubeTextureLoader).load(c);d.format=THREE.RGBFormat,scene=new THREE.Scene,scene.background=d;var e=new THREE.AmbientLight(16777215);scene.add(e),pointLight=new THREE.PointLight(16777215,2),scene.add(pointLight);var f=(new THREE.CubeTextureLoader).load(c);f.mapping=THREE.CubeRefractionMapping,f.format=THREE.RGBFormat;var g=(new THREE.MeshLambertMaterial({color:16737792,envMap:d,combine:THREE.MixOperation,reflectivity:.3}),new THREE.MeshLambertMaterial({color:16777215,envMap:f,refractionRatio:.95}));new THREE.MeshLambertMaterial({color:16777215,envMap:d});renderer=new THREE.WebGLRenderer,renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement);var h=["assets/models/hv2.json"],i=new THREE.JSONLoader;i.load(h[0],function(a){createScene(a,g)}),composer=new THREE.EffectComposer(renderer),composer.addPass(new THREE.RenderPass(scene,camera)),glitchPass=new THREE.GlitchPass,glitchPass.renderToScreen=!0,composer.addPass(glitchPass),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function createScene(a,b){var c=400,d=new THREE.Mesh(a,b);d.position.z=0,d.scale.x=d.scale.y=d.scale.z=c,model=new THREE.Object3D,model.add(d),model.rotation.set(0,0,0),scene.add(model),render()}function onDocumentMouseDown(a){glitchPass.goWild=!0,$speed=-.05,model.scale.set(4,4,4),$enableMove=!0,$body.addClass("pressed")}function onDocumentMouseMove(a){$enableMove&&(mouseX=4*(a.clientX-windowHalfX),mouseY=4*(a.clientY-windowHalfY),$mesh)}function onDocumentMouseUp(a){$speed=.005,glitchPass.goWild=!1,$enableMove=!1,model.scale.set(1,1,1),camera.position.x=0,camera.position.y=0,camera.position.z=3e3,$body.removeClass("pressed")}function animate(){requestAnimationFrame(animate),$mesh&&($m++,$m>2&&(model.rotation.y-=$speed)),render()}function render(){-2e-4*Date.now();$enableMove&&(camera.position.x+=2*(mouseX-camera.position.x),camera.position.y+=2*(-mouseY-camera.position.y)),camera.lookAt(scene.position),composer.render(scene,camera)}var container,stats,camera,scene,renderer,mesh,geometry,model;$body=$("body");var loader;$y=0,$m=0;var pointLight;$speed=.005;var mouseX=0,mouseY=0;$mesh=!1;var windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2;$enableMove=!1,init(),animate(),document.addEventListener("mousemove",onDocumentMouseMove,!1),document.addEventListener("touchmove",onDocumentMouseMove,!1),document.addEventListener("mousedown",onDocumentMouseDown,!1),document.addEventListener("touchstart",onDocumentMouseDown,!1),document.addEventListener("mouseup",onDocumentMouseUp,!1),document.addEventListener("touchend",onDocumentMouseUp,!1),THREE.DefaultLoadingManager.onProgress=function(a,b,c){b===c&&($mesh=!0)};