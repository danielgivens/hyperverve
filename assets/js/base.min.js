function init(){History.Adapter.bind(window,"statechange",function(){var a=History.getState();switch($code=a.data.state,$code){case 1:onDocumentMouseDown();break;case 2:onAboutClick();break;case 3:onContactClick()}}),$("#intro").typed({strings:["Record.","Mix.","Produce.","Manage.","Master."],typeSpeed:100,loop:!0}),container=document.createElement("div"),$(container).attr("id","bg"),document.body.appendChild(container),camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,5e3),camera.position.z=3e3;var a=(new THREE.CubeTextureLoader).load(urls);a.format=THREE.RGBFormat,scene=new THREE.Scene,scene.background=a;var b=new THREE.AmbientLight(16777215,1.2);scene.add(b),pointLight=new THREE.PointLight(16777215,.5),scene.add(pointLight);var c=(new THREE.CubeTextureLoader).load(urls);c.mapping=THREE.CubeRefractionMapping,c.format=THREE.RGBFormat;var d=(new THREE.MeshLambertMaterial({color:16737792,envMap:a,combine:THREE.MixOperation,reflectivity:.3}),new THREE.MeshLambertMaterial({color:16777215,envMap:c,refractionRatio:.95}));new THREE.MeshLambertMaterial({color:16777215,envMap:a});renderer=new THREE.WebGLRenderer,renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement);var e=new THREE.JSONLoader;e.load(jsonModelURL[0],function(a){createScene(a,d)}),composer=new THREE.EffectComposer(renderer),composer.addPass(new THREE.RenderPass(scene,camera)),glitchPass=new THREE.GlitchPass,glitchPass.renderToScreen=!0,composer.addPass(glitchPass),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function createScene(a,b){if(isMobile)var c=300;else var c=400;var d=new THREE.Mesh(a,b);d.position.z=0,d.scale.x=d.scale.y=d.scale.z=c,model=new THREE.Object3D,model.add(d),model.scale.set(1,1,1),model.rotation.set(0,0,0),scene.add(model),render()}function register(a){$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",success:function(b){"success"!=b.result?(a.removeClass("success"),a.addClass("error")):(a.removeClass("error"),a.addClass("success"))}})}function onScroll(a){$body.hasClass("show-about")&&($scrolled+=a/10,$max=($("#about").outerHeight()-$(window).height())*-1,$scrolled>=0&&($scrolled=0),$scrolled<=$max&&($scrolled=$max),$("#about").css("transform","translateY("+$scrolled+"px)"),$("video").css("transform","translateY("+$scrolled+"px)"))}function onDocumentMouseDown(a){a&&("about-btn"==$(a.target).attr("id")||"contact-btn"==$(a.target).attr("id")||$interior)||(glitchPass.Hits=.2,model.traverse(function(a){a.visible=!0}),$speed=-.025,model.scale.set(6,6,6),$enableMove=!0,$interior=!1,$body.addClass("pressed"),camera.position.z=4e3*Math.cos(.01),glitchPass.goWild=!0,$audio&&sound&&(sound.playbackRate.value=.7),$body.removeClass("interior"),$body.removeClass("show-about"),$body.removeClass("show-contact"),$("video").get(0).pause(),$("section").removeClass("active"),$("section").removeClass("done"),clearTimeout($aboutDone),clearTimeout($contactDone),a||onDocumentMouseUp())}function onAboutClick(a){$tweenSpeed=600,glitchPass.goWild=!1,clearTimeout($aboutDone),clearTimeout($contactDone),$body.hasClass("show-contact")&&($tweenSpeed=1200,$("#contact").removeClass("done"),$("#contact").removeClass("active"),$body.removeClass("interior"),glitchPass.goWild=!0),$("#about h1").fitText(.6),$interior=!0,$body.removeClass("show-about"),$body.removeClass("show-contact");var b=new TWEEN.Tween(model.scale).to({x:3,y:3,z:3},$tweenSpeed).easing(TWEEN.Easing.Exponential.InOut),c=new TWEEN.Tween(camera.position).to({x:1500,y:0,z:10},$tweenSpeed).easing(TWEEN.Easing.Exponential.InOut);$enableMove=!1,$body.addClass("pressed"),$body.addClass("show-about"),b.start(),c.start(),$scrolled=0,$("#about").css("transform","translateY(0px)"),$("video").css("transform","translateY(0px)"),c.onComplete(function(){isMobile||($speed=0),$enableMove=!0,$interior=!0,glitchPass.goWild=!0,$("#about").addClass("active"),setTimeout(function(){$("#about").removeClass("active")},100),setTimeout(function(){$("#about").addClass("active"),isMobile||$("#about").css("transform","translateY(-50px)")},200),setTimeout(function(){$("#about").removeClass("active")},300),$aboutDone=setTimeout(function(){$("#about").addClass("active"),$("#about").addClass("done"),$body.addClass("interior"),$("#contact").removeClass("done"),$("#contact").removeClass("active"),glitchPass.goWild=!1,$("video").get(0).play(),$("#about").css("transform","translateY(0px)"),$("video").css("transform","translateY(0px)"),$("video").css("top",parseInt($("#about hgroup").outerHeight())+parseInt($("#about hgroup").offset().top)+300+"px")},600)})}function onContactClick(a){$tweenSpeed=600,glitchPass.goWild=!1,clearTimeout($aboutDone),clearTimeout($contactDone),$body.hasClass("show-about")&&($tweenSpeed=1200,$("video").get(0).pause(),$("#about").removeClass("done"),$("#about").removeClass("active"),$body.removeClass("interior"),glitchPass.goWild=!0),$interior=!0,$body.removeClass("show-about"),$body.removeClass("show-contact");var b=new TWEEN.Tween(model.scale).to({x:3,y:3,z:3},$tweenSpeed).easing(TWEEN.Easing.Exponential.InOut),c=new TWEEN.Tween(camera.position).to({x:-1500,y:0,z:10},$tweenSpeed).easing(TWEEN.Easing.Exponential.InOut);$enableMove=!1,$body.addClass("pressed"),$body.addClass("show-contact"),b.start(),c.start(),c.onComplete(function(){isMobile||($speed=0),$enableMove=!0,$interior=!0,glitchPass.goWild=!0,setTimeout(function(){$("#contact").removeClass("active")},100),setTimeout(function(){$("#contact").addClass("active")},200),setTimeout(function(){$("#contact").removeClass("active")},300),$aboutDone=setTimeout(function(){$("#contact").addClass("active"),$("#contact").addClass("done"),$("video").get(0).pause(),$("#about").removeClass("done"),$("#about").removeClass("active"),$body.addClass("interior"),glitchPass.goWild=!1},600)})}function onDocumentMouseMove(a){e=a,mouseX=3*(a.clientX-windowHalfX),mouseY=3*(a.clientY-windowHalfY),$enableMove&&$audio&&sound&&!$interior&&(glitchPass.goWild=!0,sound.detune.value=(a.clientY-windowHalfY)/2),pauseEvent(e)}function pauseEvent(a){return a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1,!1}function onDocumentMouseUp(a){a&&("about-btn"==$(a.target).attr("id")||"contact-btn"==$(a.target).attr("id")||$interior)||($speed=.005,glitchPass.goWild=!1,$enableMove=!1,model.scale.set(1,1,1),camera.position.x=0,camera.position.y=0,camera.position.z=3e3,model.rotation.x=0,model.rotation.z=0,$interior=!1,$body.removeClass("pressed"),$audio&&sound&&(sound.playbackRate.value=1,sound.detune.value=0))}function animate(){requestAnimationFrame(animate),$mesh&&($m++,$m>2&&(model.rotation.y-=$speed)),TWEEN.update(),render()}function render(){-2e-4*Date.now();$mesh&&$m>2&&($interior?$amount=1e-6:$amount=1e-5,mouseX<0?model.rotation.y-=(1.5*mouseX+model.rotation.y)*$amount:model.rotation.y-=(mouseX-model.rotation.y)*$amount),$enableMove&&(isMobile||$interior||(camera.position.x+=mouseX-camera.position.x,camera.position.y+=-mouseY-camera.position.y)),camera.lookAt(scene.position),composer.render(scene,camera)}function loadSound(a){var b=new XMLHttpRequest;b.open("GET",a,!0),b.responseType="arraybuffer",b.onload=function(){audioContext.decodeAudioData(b.response,function(a){a.duration;sampleBuffer=a,playSound(0),$visualizer=setInterval(function(){$audio&&$playing&&(array=new Uint8Array(analyser.frequencyBinCount),analyser.getByteFrequencyData(array),array[8]>130&&($enableMove||$interior?$interior?(glitchPass.goWild=!1,clearTimeout($wild)):(glitchPass.goWild=!0,clearTimeout($wild)):(glitchPass.goWild=!0,$wild=setTimeout(function(){glitchPass.goWild=!1},150))),$brightness=array[6]/100,$brightness<.75&&($brightness=.75),pointLight.intensity=$brightness,array[5]>200&&($enableMove||$interior||model.traverse(function(a){a.visible=!1}),setTimeout(function(){model.traverse(function(a){a.visible=!0})},150)),array[4]>200&&($enableMove||$interior?glitchPass.hits=.05:glitchPass.Hits=array[4]/100),array[2]>200?$enableMove||$interior||(model.rotation.x-=array[3]/1e5):model.rotation.x=0,array[0]>220&&($enableMove||$interior||(model.rotation.z+=array[0]/1e5)))})})},b.send()}function setupSound(){sound=audioContext.createBufferSource(),sound.buffer=sampleBuffer,sound.loop=loop,sound.loopStart=0,sound.loopEnd=sampleBuffer.duration,sound.connect(audioContext.destination),sound.connect(analyser),analyser.connect(audioContext.destination),sound.playbackRate.value=1}function playSound(a){setupSound(),sound.start(a),$playing=!0}function stopSound(){$playing=!1,sound.stop(0)}var container,stats,camera,scene,renderer,mesh,geometry,model,loader,pointLight,$wild,$aboutDone,$contactDone;$body=$("body"),$y=0,$m=0,$speed=.005,mouseX=0,mouseY=0,angle=0,radius=3e3,$mesh=!1,$interior=!1,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,$enableMove=!1,$audio=!1,$playing=!1,$ie=!1,a=document.createElement("audio"),$audio=!(!a.canPlayType||!a.canPlayType("audio/mpeg;").replace(/no/,"")),isMobile=!1,$bg="home",$about="about",$contact="contact",(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0),isMobile&&($audio=!1,$bg="home-mobile",$about="about-mobile",$contact="contact-mobile"),path="assets/images/cube/",format=".png",urls=[path+$about+format,path+$contact+format,path+"blank"+format,path+"blank"+format,path+"blank"+format,path+$bg+format];var models=["assets/models/logo1.json","assets/models/logo2.json","assets/models/logo3.json"],model=models[Math.floor(Math.random()*models.length)],jsonModelURL=[model];if((document.documentMode||/Edge/.test(navigator.userAgent))&&($ie=!0),"CSS"in window&&"supports"in window.CSS){var support=window.CSS.supports("mix-blend-mode","soft-light");support=support?"mix-blend-mode":"no-mix-blend-mode",$("html").addClass(support)}if($audio){var audioContext=new(window.AudioContext||window.webkitAudioContext),sampleBuffer,sound,loop=!0,frequencyData,analyser;if(!$ie){var analyser=audioContext.createAnalyser();analyser.fftSize=32;var frequencyData=new Uint8Array(analyser.frequencyBinCount);analyser.getByteFrequencyData(frequencyData)}}var url=$(location).attr("href").split("/").splice(0,5).join("/"),segments=url.split("/"),action=segments[3];action&&(url=window.location.protocol+"//"+window.location.host+"/",url.indexOf("github")>=0&&(url="https://danielgivens.github.io/hyperverve/")),init(),animate(),$scrolled=0,$(document).on("mousemove",onDocumentMouseMove).on("mousedown touchstart",onDocumentMouseDown).on("mouseup touchend",onDocumentMouseUp).on("mousewheel DOMMouseScroll",function(a){var b=a.originalEvent.detail;b||(b=a.originalEvent.wheelDelta),onScroll(b),a.preventDefault()}),$("#about-btn").click(function(a){History.pushState({state:2},"ABOUT",url+"about"),a.preventDefault()}),$("#contact-btn").click(function(a){History.pushState({state:3},"CONTACT",url+"contact"),a.preventDefault()}),$(".logo").mousedown(function(a){$interior=!1,History.pushState({state:1},"HYPER VERVE",url)}),$("#mute").click(function(){$body.hasClass("muted")?(playSound(),$body.removeClass("muted")):(stopSound(),$body.addClass("muted"))});var $form=$("#contact form");$form.length>0&&$('form input[type="submit"]').bind("click",function(a){a&&a.preventDefault(),register($form)}),currentY=0,startingY=0,$meshCount=0,THREE.DefaultLoadingManager.onProgress=function(a,b,c){b===c&&($mesh=!0,$meshCount++,1==$meshCount&&($body.addClass("loaded"),"about"==action?(onAboutClick(),History.pushState({state:2},"ABOUT",url+"about")):"contact"==action?(onContactClick(),History.pushState({state:3},"CONTACT",url+"contact")):(onDocumentMouseDown(),History.pushState({state:1},"HYPER VERVE",url)),$audio&&($body.addClass("audio"),loadSound("assets/audio/loop.mp3"))))};var sampleBuffer,sampleCount;